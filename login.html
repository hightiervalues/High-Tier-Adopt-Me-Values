<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Log In • High Tier Adopt Me Values</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="topbar">
    <div class="left-header">
      <button id="menuToggle" class="menu-toggle">☰</button>
      <div class="logo">HighTier<span>Values</span></div>
    </div>

    <nav class="nav">
      <a href="index.html" class="nav-link">Trade Calc</a>
      <a href="signup.html" class="nav-link">Sign Up</a>
      <a href="login.html" class="nav-link active">Log In</a>
      <a href="profile.html" class="nav-link">Profile</a>
    </nav>
  </header>

  <main class="auth-page">
    <section class="auth-card">
      <h1>Welcome back</h1>
      <p class="auth-subtitle">
        Log in to manage your High Tier Values profile.
      </p>

      <form id="loginForm" class="auth-form">
        <label>
          Email
          <input type="email" id="loginEmail" required placeholder="you@example.com" />
        </label>

        <label>
          Password
          <input type="password" id="loginPassword" required placeholder="Your password" />
        </label>

        <button type="submit" class="btn-primary auth-btn">Log In</button>
      </form>

      <p class="auth-footer-text">
        No account yet?
        <a href="signup.html">Sign up</a>
      </p>

      <p id="loginError" class="auth-error"></p>
    </section>
  </main>

  <div id="menuOverlay" class="menu-overlay"></div>
  <aside id="sideMenu" class="side-menu">
    <div class="side-menu-header">
      <h2>Menu</h2>
      <button id="menuClose" class="menu-close">×</button>
    </div>
    <div class="side-menu-section">
      <p class="side-text">Use the main page to calculate trades.</p>
    </div>
  </aside>

  <script>
    function initMenu() {
      var menuToggle = document.getElementById("menuToggle");
      var menuClose = document.getElementById("menuClose");
      var sideMenu = document.getElementById("sideMenu");
      var overlay = document.getElementById("menuOverlay");

      function openMenu() {
        if (sideMenu) sideMenu.classList.add("open");
        if (overlay) overlay.classList.add("visible");
      }
      function closeMenu() {
        if (sideMenu) sideMenu.classList.remove("open");
        if (overlay) overlay.classList.remove("visible");
      }

      if (menuToggle) menuToggle.addEventListener("click", openMenu);
      if (menuClose) menuClose.addEventListener("click", closeMenu);
      if (overlay) overlay.addEventListener("click", closeMenu);
    }

    function loadUsers() {
      try {
        var stored = localStorage.getItem("users");
        if (!stored) return [];
        return JSON.parse(stored);
      } catch (e) {
        return [];
      }
    }

    document.addEventListener("DOMContentLoaded", function () {
      initMenu();

      var form = document.getElementById("loginForm");
      var emailInput = document.getElementById("loginEmail");
      var passInput = document.getElementById("loginPassword");
      var errorEl = document.getElementById("loginError");

      form.addEventListener("submit", function (e) {
        e.preventDefault();
        errorEl.textContent = "";

        var email = emailInput.value.trim().toLowerCase();
        var pass = passInput.value;

        if (!email || !pass) {
          errorEl.textContent = "Please enter your email and password.";
          return;
        }

        var users = loadUsers();
        var user = users.find(function (u) { return u.email === email; });

        if (!user || user.password !== pass) {
          errorEl.textContent = "Login failed. Please check your details.";
          return;
        }

        localStorage.setItem("currentUser", JSON.stringify(user));

        // go back to main calculator or profile
        window.location.href = "index.html";
      });
    });
  </script>
</body>
</html>
